{% load static %}
<!DOCTYPE html>
<html lang="pt-br">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Dados do Usuário</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet" />
    <link rel="stylesheet" href="{% static 'css/dados_usuario.css' %}" />
  </head>

  <body>
    <!-- Navbar -->
    <nav class="navbar navbar-expand-lg navbar-dark bg-primary">
      <div class="container">
        <a class="navbar-brand fw-bold ms-4" href="{% url 'editar' %}">Dados do Usuário</a>
        <a href="{% url 'deslogar' %}" class="btn btn-danger btn-sm me-4">Sair</a>
      </div>
    </nav>

    <div class="container mt-4 mb-5">
      <div class="card shadow-sm p-4">
        <!-- FORMULÁRIO DE DADOS -->
        <form action="{% url 'editar' %}" method="POST">
          {% csrf_token %}
          <h5 class="text-primary mb-3 fw-bold">Informações Pessoais</h5>

          <div class="row mb-3">
            <div class="col-md-6">
              <label for="nomeCompleto" class="form-label">Nome completo</label>
              {% if request.user.first_name %}
                <input type="text" id="nomeCompleto" name="nomeCompleto" class="form-control" placeholder="Ex: Maria Souza" value="{{ request.user.first_name }}" />
              {% else %}
                <input type="text" id="nomeCompleto" name="nomeCompleto" class="form-control" placeholder="Ex: Maria Souza" value="" />
              {% endif %}
            </div>
            <div class="col-md-6">
              <label for="cpf" class="form-label">CPF</label>
              {% if request.user.informacoesadicionais.cpf %}
                <input type="text" id="cpf" name="cpf" class="form-control" placeholder="000.000.000-00" value="{{ request.user.informacoesadicionais.cpf }}" />
              {% else %}
                <input type="text" id="cpf" name="cpf" class="form-control" placeholder="000.000.000-00" value="" />
              {% endif %}
            </div>
          </div>

          <div class="row mb-3">
            <div class="col-md-6">
              <label for="telefone" class="form-label">Telefone</label>
              {% if request.user.informacoesadicionais.telefone %}
                <input type="tel" id="telefone" name="telefone" class="form-control" placeholder="(00) 90000-0000" value="{{ request.user.informacoesadicionais.telefone }}" />
              {% else %}
                <input type="tel" id="telefone" name="telefone" class="form-control" placeholder="(00) 90000-0000" value="" />
              {% endif %}
            </div>
            <div class="col-md-6">
              <label for="dataNasc" class="form-label">Data de Nascimento</label>
              {% if request.user.informacoesadicionais.dataNascimento %}
                <input type="date" id="dataNasc" name="dataNascimento" class="form-control" value="{{ request.user.informacoesadicionais.dataNascimento }}" />
              {% else %}
                <input type="date" id="dataNasc" name="dataNascimento" class="form-control" value="" />
              {% endif %}
            </div>
          </div>

          <div class="row mb-3">
            <div class="col-md-6">
              <label for="tipoSanguineo" class="form-label">Tipo Sanguíneo</label>
              {% if request.user.informacoesadicionais.tipoSanguineo %}
                <select id="tipoSanguineo" name="tipoSanguineo" class="form-select" value="request.user.informacoesadicionais.tipoSanguineo">
                  <option value="">Selecione</option>
                  <option value="A+">A+</option>
                  <option value="A-">A-</option>
                  <option value="B+">B+</option>
                  <option value="B-">B-</option>
                  <option value="AB+">AB+</option>
                  <option value="AB-">AB-</option>
                  <option value="O+">O+</option>
                  <option value="O-">O-</option>
                </select>
              {% else %}
                <select id="tipoSanguineo" name="tipoSanguineo" class="form-select" value="">
                  <option value="">Selecione</option>
                  <option value="A+">A+</option>
                  <option value="A-">A-</option>
                  <option value="B+">B+</option>
                  <option value="B-">B-</option>
                  <option value="AB+">AB+</option>
                  <option value="AB-">AB-</option>
                  <option value="O+">O+</option>
                  <option value="O-">O-</option>
                </select>
              {% endif %}
            </div>
            <div class="col-md-6">
              <label for="email" class="form-label">Email</label>
              {% if request.user.username %}
                <input type="text" id="email" name="email" class="form-control" placeholder="Ex: seuemail@gmail.com" value="{{ request.user.username }}" />
              {% else %}
                <input type="text" id="email" name="email" class="form-control" placeholder="Ex: seuemail@gmail.com" value="" />
              {% endif %}
            </div>
          </div>

          <div class="mb-3">
            <label for="alergias" class="form-label">Alergias Medicamentosas</label>
            {% if request.user.informacoesadicionais.alergiasMedicamentos %}
              <textarea id="alergias" name="alergias" class="form-control" placeholder="Antibióticos, analgésicos, anti-inflamatórios..." rows="2" value="request.user.informacoesadicionais.alergiasMedicamentos"></textarea>
            {% else %}
              <textarea id="alergias" name="alergias" class="form-control" placeholder="Antibióticos, analgésicos, anti-inflamatórios..." rows="2" value=""></textarea>
            {% endif %}
          </div>

          <div class="mb-3">
            <label for="restricoes" class="form-label">Restrições</label>
            {% if request.user.informacoesadicionais.restricoes %}
              <textarea id="restricoes" name="restricoes" class="form-control" placeholder="Informe restrições alimentares, físicas..." rows="2" value="request.user.informacoesadicionais.restricoes"></textarea>
            {% else %}
              <textarea id="restricoes" name="restricoes" class="form-control" placeholder="Informe restrições alimentares, físicas..." rows="2" value=""></textarea>
            {% endif %}
          </div>

          <div class="mb-3">
            <label for="endereco" class="form-label">Endereço</label>
            {% if request.user.informacoesadicionais.endereco %}
              <input type="text" id="endereco" name="endereco" class="form-control" placeholder="Ex: Rua, número, bairro, cidade" value="{{ request.user.informacoesadicionais.endereco }}" />
            {% else %}
              <input type="text" id="endereco" name="endereco" class="form-control" placeholder="Ex: Rua, número, bairro, cidade" value="" />
            {% endif %}
          </div>

          <hr class="my-4" />

          <h5 class="text-primary mb-3 fw-bold">Contato de Emergência</h5>
          {% with contato=request.user.informacoesadicionais.contatosemergencia %}
            <div class="row mb-3">
              <div class="col-md-6">
                <label for="nomeEmergencia" class="form-label">Nome do Contato</label>
                {% if contato.nomeEmergencia %}
                  <input type="text" id="nomeEmergencia" name="nomeEmergencia" class="form-control" placeholder="Ex: Maria Souza" value="{{ contato.nomeEmergencia }}" />
                {% else %}
                  <input type="text" id="nomeEmergencia" name="nomeEmergencia" class="form-control" placeholder="Ex: Maria Souza" value="" />
                {% endif %}
              </div>
              <div class="col-md-6">
                <label for="telefoneEmergencia" class="form-label">Telefone de Emergência</label>
                {% if contato.telefoneEmergencia %}
                  <input type="tel" id="telefoneEmergencia" name="telefoneEmergencia" class="form-control" placeholder="(00) 90000-0000" value="{{ contato.telefoneEmergencia }}" />
                {% else %}
                  <input type="tel" id="telefoneEmergencia" name="telefoneEmergencia" class="form-control" placeholder="(00) 90000-0000" value="" />
                {% endif %}
              </div>
            </div>
          {% endwith %}

          <div class="d-flex justify-content-start mt-5">
            <button type="submit" name="acao" value="salvar" class="btn btn-success px-4 me-5">Salvar</button>
            <button type="submit" name="acao" value="excluir" class="btn btn-danger px-4 ms-5">Excluir</button>
          </div>
        </form>
      </div>
    </div>

    <!-- Bootstrap -->
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js"></script>
  </body>
</html>
